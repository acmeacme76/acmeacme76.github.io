<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haibo Ni - App Developer</title> 
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007aff;
            --background-color: #f8f9fd;
            --text-color: #2d2d2d;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --accent-color: #ff6b6b;
            --card-color-1: #FF8C38;
            --card-color-2: #FF6B6B;
            --card-color-3: #A77BCA;
            --card-color-4: #4AB8FF;
            --card-color-5: #FFD93D;
            --card-color-6: #6BCB77;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(to bottom, var(--background-color), #ffffff);
            min-height: 100vh;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 20px;
        }
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px var(--shadow-color);
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-color);
            letter-spacing: 1px;
            transition: color 0.3s ease;
        }
        .logo:hover {
            color: var(--accent-color);
        }
        nav {
            display: flex;
            align-items: center;
        }
        nav a, .lang-switch a {
            margin-left: 25px;
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: color 0.3s ease;
            cursor: pointer;
        }
        nav a:hover, .lang-switch a:hover {
            color: var(--primary-color);
        }
        .lang-switch a.active {
            color: var(--primary-color);
            font-weight: 700;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 2px;
        }
        .lang-separator {
            margin-left: 8px;
            margin-right: 8px;
            color: #ccc;
        }
        .hero {
            display: flex;
            align-items: center;
            gap: 60px;
            padding: 100px 0;
        }
        .hero-content {
            flex: 1;
        }
        .hero-image {
            flex: 1;
            text-align: center;
        }
        .hero-image img {
            max-width: 340px;
            border-radius: 25px;
            box-shadow: 0 15px 40px var(--shadow-color);
            transform: translateY(0);
            transition: transform 0.3s ease;
        }
        .hero-image img:hover {
            transform: translateY(-10px);
        }
        h1 {
            font-size: 56px;
            margin-bottom: 25px;
            color: var(--text-color);
            font-weight: 700;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .subtitle {
            font-size: 20px;
            color: #666;
            margin-bottom: 35px;
            font-weight: 300;
        }
        .app-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 50px;
            margin-bottom: 50px;
            box-shadow: 0 15px 40px var(--shadow-color);
            transition: transform 0.3s ease;
        }
        .app-section:hover {
            transform: translateY(-5px);
        }
        .app-header {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-bottom: 35px;
        }
        .app-icon {
            width: 90px;
            height: 90px;
            border-radius: 25px;
            box-shadow: 0 5px 15px var(--shadow-color);
        }
        #app-subtitle { 
            margin: 0;
        }
        .video-section {
            display: flex;
            gap: 35px;
            margin-bottom: 40px;
            align-items: flex-start;
        }
        .video-container {
            width: 366px;
            height: 793px;
            margin-left: 40px;
            overflow: hidden;
            position: relative;
            background: #000;
        }
        .video-container iframe {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            object-fit: cover;
        }
        .promo-container {
            flex: 1;
            height: 793px;
            overflow-y: auto;
            position: relative;
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
        }
        .promo-container::-webkit-scrollbar {
            width: 8px;
        }
        .promo-container::-webkit-scrollbar-track {
            background: transparent;
        }
        .promo-container::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }
        .promo-container::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.5);
        }
        .promo-scroller {
            display: flex;
            flex-direction: column;
            gap: 20px;
            animation: auto-scroll 30s linear infinite;
        }
        .promo-container:hover .promo-scroller {
            animation-play-state: paused;
        }
        @keyframes auto-scroll {
            0% { transform: translateY(0); }
            100% { transform: translateY(calc(-100% + 793px)); }
        }
        .promo-card {
            background: #fff;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            color: #fff;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .promo-card:hover {
            transform: translateY(-5px);
        }
        .promo-card h3 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
        }
        .promo-card h4 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        .promo-card p {
            font-size: 15px;
            text-align: left;
            margin-bottom: 10px;
            line-height: 1.7;
        }
        .promo-card ul {
            list-style-type: disc;
            margin: 10px auto;
            text-align: left;
            max-width: 90%;
        }
        .promo-card ul li {
            margin-bottom: 8px;
            font-size: 14px;
        }
        .promo-card ul ul {
            list-style-type: circle;
            margin-left: 20px;
            margin-top: 8px;
        }
        .promo-card:nth-child(1) { background: var(--card-color-1); }
        .promo-card:nth-child(2) { background: var(--card-color-2); }
        .promo-card:nth-child(3) { background: var(--card-color-3); }
        .promo-card:nth-child(4) { background: var(--card-color-4); }
        .promo-card:nth-child(5) { background: var(--card-color-5); }
        .promo-card:nth-child(6) { background: var(--card-color-6); }
        .promo-card:nth-child(7) { background: var(--card-color-1); }
        .promo-card:nth-child(8) { background: var(--card-color-2); }
        .promo-card:nth-child(9) { background: var(--card-color-3); }
        .app-links {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }
        .app-links-row {
            display: flex;
            gap: 15px;
        }
        .app-links-row a {
            flex: 1;
            text-align: center;
        }
        .app-links-row:last-child a {
            width: 100%;
        }
        .app-link {
            padding: 12px 28px;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 122, 255, 0.3);
        }
        .app-link:hover {
            background: var(--accent-color);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
        }
        footer {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 -4px 20px var(--shadow-color);
        }
        #footer-text {
            margin: 0;
        }
        .google-play-notice {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 6px 12px; /* 缩小内边距以更贴近按钮 */
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
            white-space: nowrap;
            pointer-events: none; /* 防止弹窗干扰鼠标事件 */
        }
        .google-play-notice.show {
            opacity: 1;
        }
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .hero { flex-direction: column; gap: 30px; padding: 40px 20px; text-align: center; }
            .hero-content { order: 2; }
            .hero-image { order: 1; }
            .hero-image img { max-width: 80%; height: auto; }
            h1 { font-size: 36px; margin-bottom: 15px; }
            .subtitle { font-size: 16px; margin-bottom: 25px; }
            .app-links { justify-content: center; flex-wrap: wrap; }
            .app-link { padding: 10px 24px; font-size: 14px; margin-bottom: 10px; }
            .app-section { padding: 25px 15px; border-radius: 15px; }
            .app-header { flex-direction: column; text-align: center; gap: 15px; }
            .video-section { flex-direction: column; gap: 20px; }
            .video-container { width: 100%; height: auto; aspect-ratio: 9/16; margin-left: 0; }
            .promo-container { height: auto; max-height: 500px; width: 100%; }
            .promo-scroller { animation: none; }
            .header-content { padding: 0 15px; flex-wrap: wrap; }
            .logo { font-size: 24px; margin-bottom: 5px; }
            nav { width: 100%; justify-content: flex-end; margin-top: 5px; }
            nav a, .lang-switch a { margin-left: 15px; font-size: 14px; }
            .lang-separator { margin-left: 5px; margin-right: 5px; }
        }
        @media (max-width: 480px) {
            .hero { padding: 30px 15px; }
            h1 { font-size: 28px; }
            .hero-image img { max-width: 90%; }
            .app-section { margin-bottom: 30px; }
            .app-icon { width: 70px; height: 70px; }
            .promo-card { padding: 15px; }
            .promo-card h3 { font-size: 20px; }
            .promo-card h4 { font-size: 16px; }
            .promo-card p, .promo-card ul li { font-size: 13px; }
            nav { justify-content: center; }
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 8px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: black;
        }
        .modal-content a {
            color: var(--primary-color);
            text-decoration: none;
        }
        .modal-content a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">Haibo Ni - App Developer</div>
            <nav>
                <a href="https://www.linkedin.com/in/haibo-ni-55669820/" target="_blank" id="nav-linkedin">LinkedIn</a>
                <div class="lang-switch">
                    <a href="#" id="lang-en">English</a>
                    <span class="lang-separator">|</span>
                    <a href="#" id="lang-zh">中文</a>
                </div>
            </nav>
        </div>
    </header>

    <div class="container">
        <section class="hero">
            <div class="hero-content">
                <h1 id="hero-title">iQuoteX App</h1>
                <p class="subtitle" id="hero-subtitle">Capture, Learn, Inspire, Wisdom.</p>
                <div class="app-links">
                    <div class="app-links-row">
                        <a href="https://apps.apple.com/us/app/iquotex/id6742444842" class="app-link" target="_blank" id="link-appstore">App Store</a>
                        <a href="#" class="app-link" id="link-googleplay">Google Play</a>
                    </div>
                    <div class="app-links-row">
                        <a href="#" class="app-link" id="link-appstore-cn">App Store (中国用户)</a>
                    </div>
                    <div class="app-links-row">
                        <a href="app-release.apk" class="app-link" id="link-direct-download" download="iQuoteX.apk">Direct Download for Android</a>
                    </div>
                </div>
            </div>
            <div class="hero-image">
                <img src="Landscape_Banner_Ad_1200x720.png" alt="iQuoteX App Banner">
            </div>
        </section>  

        <section class="app-section">
            <div class="app-header">
                <img src="iQuoteX_icon.png" alt="App Icon" class="app-icon">
                <div>
                    <h2 id="app-name">iQuoteX</h2>
                    <p id="app-subtitle">Your daily companion for wisdom and inspiration</p>
                </div>
            </div>

            <div class="video-section">
                <div class="video-container">
                    <iframe 
                        width="366" 
                        height="793" 
                        src="https://www.youtube.com/embed/IJn4OqwUTTo?rel=0&autoplay=0&hd=1&vq=hd1080" 
                        title="YouTube video player" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        referrerpolicy="strict-origin-when-cross-origin" 
                        allowfullscreen>
                    </iframe>
                </div>
                <div class="promo-container">
                    <div class="promo-scroller">
                        <div class="promo-card">
                            <h3 id="promo1-title">iQuoteX - A Quote Sharing and Management App</h3>
                            <p id="promo1-text">Have you ever been moved by a quote but had nowhere to keep it? iQuoteX is tailor-made for word lovers, helping you capture, collect, and share every moment of inspiration. From motivational sayings to literary classics and everyday wisdom, iQuoteX not only organizes your treasured quotes but also makes learning fun with CEFR-standard games.</p>
                        </div>
                        <div class="promo-card">
                            <h4 id="promo2-title">Vast Bilingual Treasury</h4>
                            <p id="promo2-text">With over 1.4 million English and Chinese quotes, a single keyword search instantly sparks inspiration. Enhanced with AI-powered English-Chinese translation for seamless switching and barrier-free understanding, plus AI voice narration that turns every quote into a captivating recitation, deepening your connection to the words.</p>
                        </div>
                        <div class="promo-card">
                            <h4 id="promo3-title">Exclusive Collection</h4>
                            <p id="promo3-text">Save your favorite quotes with one tap, building your personal wisdom vault—ready to share inspiration at any time.</p>
                        </div>
                        <div class="promo-card">
                            <h4 id="promo4-title">Daily Inspiration Push</h4>
                            <p id="promo4-text">Open the app to enjoy a random quote, uncovering hidden gems of wisdom every day.</p>
                        </div>
                        <div class="promo-card">
                            <h4 id="promo5-title">Global Interaction Circle</h4>
                            <p id="promo5-text">Like, save, and share quotes to unlock personalized recommendations, joining millions worldwide in a thriving inspiration community.</p>
                        </div>
                        <div class="promo-card">
                            <h4 id="promo6-title">Sleek and Seamless Design</h4>
                            <p id="promo6-text">A modern interface with intuitive controls, making inspiration management effortless.</p>
                        </div>
                        <div class="promo-card">
                            <h4 id="promo7-title">Interactive Game Mode</h4>
                            <p id="promo7-text1">Two bilingual educational games blending fun and learning—compete for global rankings:</p>
                            <ul>
                                <li id="promo7-game1-title"><em>Gap Genius (Fill-in-the-Blank Master)</em></li>
                                <li id="promo7-game1-desc">Five random quotes, a race against time to fill in missing words—dual English and Chinese challenges. Memorize quotes, sharpen expression, and climb the global leaderboard!</li>
                                <li id="promo7-game2-title"><em>Word Master (Vocabulary Wizard)</em></li>
                                <li id="promo7-game2-desc">Three levels: Beginner (e.g., "cat," "一日三餐"), Intermediate (e.g., "persuade," "坚持不懈"), Advanced (e.g., "ephemeral," "罄竹难书"). Find words fast, aligned with CEFR and HSK standards, and sprint to the Vocabulary Master排行榜!</li>
                            </ul>
                        </div>
                        <div class="promo-card">
                            <h4 id="promo8-title">Who It's For</h4>
                            <p id="promo8-text">Students, writers, speakers, or anyone who cherishes words and strives to master language skills. Draw wisdom, hone vocabulary, and let iQuoteX be your ultimate companion.</p>
                        </div>
                        <div class="promo-card">
                            <h4 id="promo9-title">Conclusion</h4>
                            <p id="promo9-text">iQuoteX is more than a quote tool—it's a stage for inspiration and growth. Download and subscribe now for an ad-free experience, compete with players worldwide, and ignite your spark of wisdom!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="appstore-cn-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>中国苹果用户说明</h3>
            <p>由于苹果应用商店的限制，中国用户无法直接下载 iQuoteX 应用。为了方便中国用户，我们提供了以下测试通道：</p>
            <p>1. 请发送邮件至 <a href="mailto:iquoteacme@gmail.com">iquoteacme@gmail.com</a></p>
            <p>2. 在邮件中说明您希望加入 iQuoteX 的测试计划</p>
            <p>3. 我们会尽快回复并提供测试版应用的下载链接</p>
            <p>感谢您的理解和支持！</p>
        </div>
    </div>

    <footer>
        <div class="container">
            <p id="footer-text"> 2025 Haibo Ni. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // --- Translations Object ---
        const translations = {
            en: {
                pageTitle: "Haibo Ni - App Developer",
                navLinkedin: "LinkedIn",
                heroTitle: "iQuoteX App",
                heroSubtitle: "Capture, Learn, Inspire, Wisdom.",
                linkAppstore: "App Store",
                linkAppstoreCn: "App Store (China Users)",
                linkGoogleplay: "Google Play",
                linkDirectDownload: "Direct Download for Android",
                appName: "iQuoteX",
                appSubtitle: "Your daily companion for wisdom and inspiration",
                promo1Title: "iQuoteX - A Quote Sharing and Management App",
                promo1Text: "Have you ever been moved by a quote but had nowhere to keep it? iQuoteX is tailor-made for word lovers, helping you capture, collect, and share every moment of inspiration. From motivational sayings to literary classics and everyday wisdom, iQuoteX not only organizes your treasured quotes but also makes learning fun with CEFR-standard games.",
                promo2Title: "Vast Bilingual Treasury",
                promo2Text: "With over 1.4 million English and Chinese quotes, a single keyword search instantly sparks inspiration. Enhanced with AI-powered English-Chinese translation for seamless switching and barrier-free understanding, plus AI voice narration that turns every quote into a captivating recitation, deepening your connection to the words.",
                promo3Title: "Exclusive Collection",
                promo3Text: "Save your favorite quotes with one tap, building your personal wisdom vault—ready to share inspiration at any time.",
                promo4Title: "Daily Inspiration Push",
                promo4Text: "Open the app to enjoy a random quote, uncovering hidden gems of wisdom every day.",
                promo5Title: "Global Interaction Circle",
                promo5Text: "Like, save, and share quotes to unlock personalized recommendations, joining millions worldwide in a thriving inspiration community.",
                promo6Title: "Sleek and Seamless Design",
                promo6Text: "A modern interface with intuitive controls, making inspiration management effortless.",
                promo7Title: "Interactive Game Mode",
                promo7Text1: "Two bilingual educational games blending fun and learning—compete for global rankings:",
                promo7Game1Title: "<em>Gap Genius (Fill-in-the-Blank Master)</em>",
                promo7Game1Desc: "Five random quotes, a race against time to fill in missing words—dual English and Chinese challenges. Memorize quotes, sharpen expression, and climb the global leaderboard!",
                promo7Game2Title: "<em>Word Master (Vocabulary Wizard)</em>",
                promo7Game2Desc: 'Three levels: Beginner (e.g., "cat," "一日三餐"), Intermediate (e.g., "persuade," "坚持不懈"), Advanced (e.g., "ephemeral," "罄竹难书"). Find words fast, aligned with CEFR and HSK standards, and sprint to the Vocabulary Master排行榜!',
                promo8Title: "Who It's For",
                promo8Text: "Students, writers, speakers, or anyone who cherishes words and strives to master language skills. Draw wisdom, hone vocabulary, and let iQuoteX be your ultimate companion.",
                promo9Title: "Conclusion",
                promo9Text: "iQuoteX is more than a quote tool—it's a stage for inspiration and growth. Download and subscribe now for an ad-free experience, compete with players worldwide, and ignite your spark of wisdom!",
                footerText: " 2025 Haibo Ni. All rights reserved.",
                youtubeNotice: "Video content is unavailable in your region."
            },
            zh: {
                pageTitle: "倪海波 - App开发者",
                navLinkedin: "领英",
                heroTitle: "iQuoteX 应用",
                heroSubtitle: "品悟、学习、启发、智慧。",
                linkAppstore: "App Store",
                linkAppstoreCn: "App Store (中国用户)",
                linkGoogleplay: "Google Play",
                linkDirectDownload: "直接下载 Android 版",
                appName: "iQuoteX",
                appSubtitle: "您的日常智慧与灵感伴侣",
                promo1Title: "iQuoteX - 语录分享与管理应用",
                promo1Text: "您是否曾为一句触动心灵的语录而无处安放？iQuoteX专为文字爱好者打造，帮您捕捉、收藏、分享每一个灵感瞬间。从励志名言到文学经典，再到生活感悟，iQuoteX不仅能整理您的珍藏语录，更通过符合CEFR标准的趣味游戏，让学习充满乐趣。",
                promo2Title: "海量双语宝库",
                promo2Text: "超140万条中英双语录，关键词一搜即得，灵感瞬间点燃。融合AI智能英汉互译，语言切换无缝对接，理解无障碍。更有AI语音朗读功能，让每条语录都成为声情并茂的诵读，加深您与文字的情感连接。",
                promo3Title: "专属收藏夹",
                promo3Text: "一键收藏心动语录，构建个人智慧库，随时分享灵感火花。",
                promo4Title: "每日灵感推送",
                promo4Text: "开启应用即享随机语录，每日探索未知的智慧宝藏。",
                promo5Title: "全球互动圈",
                promo5Text: "点赞、收藏、分享语录，解锁个性化推荐，与全球百万用户共建灵感社区。",
                promo6Title: "简洁流畅设计",
                promo6Text: "现代感界面，操作直观便捷，灵感管理轻松自如。",
                promo7Title: "互动游戏模式",
                promo7Text1: "两大双语益智游戏，寓教于乐，争夺全球排名：",
                promo7Game1Title: "<em>填空高手 (Gap Genius)</em>",
                promo7Game1Desc: "随机五句语录，限时挑战填补缺失单词，中英双语并行。在游戏中记忆语录，锻炼表达，冲击全球排行榜！",
                promo7Game2Title: "<em>词汇大师 (Word Master)</em>",
                promo7Game2Desc: '三个级别：初级（如“猫”、“一日三餐”），中级（如“persuade”、“坚持不懈”），高级（如“ephemeral”、“罄竹难书”）。对标CEFR及HSK标准，快速找词，冲刺词汇大师排行榜！',
                promo8Title: "适用人群",
                promo8Text: "无论您是学生、作家、演讲者，还是任何珍视文字、渴望提升语言能力的人。汲取智慧，锤炼词汇，让iQuoteX成为您的得力助手。",
                promo9Title: "结语",
                promo9Text: "iQuoteX，不只是语录工具，更是灵感迸发、学习成长的舞台。立即下载订阅，享受无广告体验，与全球玩家竞技，点亮您的智慧火花！",
                footerText: " 2025 倪海波. 版权所有.",
                youtubeNotice: "视频内容在您所在地区无法访问。"
            }
        };

        // --- Language Setting Function ---
        function setLanguage(lang) {
            if (!translations[lang]) {
                console.error("Language not supported:", lang);
                return;
            }

            const langData = translations[lang];
            document.documentElement.lang = lang;

            for (const key in langData) {
                const element = document.getElementById(key.replace(/[A-Z]/g, letter => `-${letter.toLowerCase()}`));
                if (element) {
                    if (key === 'promo7Game1Title' || key === 'promo7Game2Title') {
                        element.innerHTML = langData[key];
                    } else {
                        element.textContent = langData[key];
                    }
                } else if (key === 'pageTitle') {
                    document.title = langData[key];
                }
            }

            document.getElementById('lang-en').classList.toggle('active', lang === 'en');
            document.getElementById('lang-zh').classList.toggle('active', lang === 'zh');

            try {
                localStorage.setItem('preferredLanguage', lang);
            } catch (e) {
                console.warn("Could not save language preference to localStorage:", e);
            }
        }

        // --- YouTube Accessibility Check ---
        function checkYouTubeAccessibility(callback) {
            const testUrl = 'https://www.youtube.com/favicon.ico';
            const img = new Image();
            let isAccessible = false;

            const timeout = setTimeout(() => {
                img.src = '';
                callback(false);
            }, 5000);

            img.onload = () => {
                clearTimeout(timeout);
                isAccessible = true;
                callback(true);
            };

            img.onerror = () => {
                clearTimeout(timeout);
                callback(false);
            };

            img.src = testUrl + '?t=' + new Date().getTime();
        }

        // --- Adjust Layout Based on YouTube Accessibility ---
        function adjustLayout(isYouTubeAccessible) {
            const videoContainer = document.querySelector('.video-container');
            const promoContainer = document.querySelector('.promo-container');
            const videoSection = document.querySelector('.video-section');

            if (!isYouTubeAccessible) {
                videoContainer.style.display = 'none';
                promoContainer.style.width = '100%';
                promoContainer.style.height = 'auto';
                promoContainer.style.maxHeight = '793px';
                videoSection.style.gap = '0';

                const notice = document.createElement('p');
                notice.textContent = translations[document.documentElement.lang || 'en'].youtubeNotice;
                notice.style.color = '#666';
                notice.style.textAlign = 'center';
                notice.style.marginBottom = '20px';
                videoSection.insertBefore(notice, promoContainer);
            }
        }

        // --- Event Listeners ---
        document.getElementById('lang-en').addEventListener('click', (e) => {
            e.preventDefault();
            setLanguage('en');
        });

        document.getElementById('lang-zh').addEventListener('click', (e) => {
            e.preventDefault();
            setLanguage('zh');
        });

        // --- Google Play Link Popup ---
        const googlePlayLink = document.getElementById('link-googleplay');
        let noticeTimeout;

        googlePlayLink.addEventListener('click', (e) => {
            e.preventDefault(); // Prevent default link behavior since it's not available yet
        
            // Remove existing notice if any
            const existingNotice = document.querySelector('.google-play-notice');
            if (existingNotice) {
                existingNotice.remove();
            }
        
            // Create new notice
            const notice = document.createElement('div');
            notice.className = 'google-play-notice';
            notice.textContent = 'Coming Soon';
        
            // Append to the parent of the link (app-links div)
            const linkParent = googlePlayLink.parentElement;
            linkParent.appendChild(notice);
        
            // Ensure linkParent is positioned relatively to allow absolute positioning of notice
            if (getComputedStyle(linkParent).position === 'static') {
                linkParent.style.position = 'relative';
            }
        
            // Calculate position relative to the Google Play button
            const buttonRect = googlePlayLink.getBoundingClientRect();
            const parentRect = linkParent.getBoundingClientRect();
            const noticeRect = notice.getBoundingClientRect();
            const offsetX = 10; // Distance from the right edge of the button
        
            // Position the notice to the right of the button, vertically centered
            const leftPosition = buttonRect.right - parentRect.left + offsetX;
            const topPosition = buttonRect.top - parentRect.top + (buttonRect.height - noticeRect.height) / 2;
        
            notice.style.left = `${leftPosition}px`;
            notice.style.top = `${topPosition}px`;
        
            // Ensure notice doesn't go off-screen
            const windowWidth = window.innerWidth;
            if (buttonRect.right + offsetX + noticeRect.width > windowWidth) {
                // If it overflows on the right, position it to the left of the button
                notice.style.left = `${buttonRect.left - parentRect.left - noticeRect.width - offsetX}px`;
            }
        
            // Show notice
            setTimeout(() => {
                notice.classList.add('show');
            }, 10); // Small delay to trigger transition
        
            // Clear any existing timeout
            if (noticeTimeout) {
                clearTimeout(noticeTimeout);
            }
        
            // Hide notice after 2 seconds
            noticeTimeout = setTimeout(() => {
                notice.classList.remove('show');
                setTimeout(() => {
                    notice.remove();
                }, 300); // Wait for fade-out transition
            }, 2000);
        });

        // --- Modal Functionality ---
        const modal = document.getElementById('appstore-cn-modal');
        const btn = document.getElementById('link-appstore-cn');
        const span = document.getElementsByClassName('close')[0];

        btn.onclick = function() {
            modal.style.display = 'block';
        }

        span.onclick = function() {
            modal.style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // --- Initial Language Setup ---
        document.addEventListener('DOMContentLoaded', () => {
            let preferredLang = 'en';

            try {
                const storedLang = localStorage.getItem('preferredLanguage');
                if (storedLang && translations[storedLang]) {
                    preferredLang = storedLang;
                } else {
                    const browserLang = navigator.language || navigator.userLanguage;
                    if (browserLang.startsWith('zh')) {
                        preferredLang = 'zh';
                    }
                }
            } catch (e) {
                console.warn("Could not access localStorage:", e);
                const browserLang = navigator.language || navigator.userLanguage;
                if (browserLang.startsWith('zh')) {
                    preferredLang = 'zh';
                }
            }

            setLanguage(preferredLang);

            document.getElementById('link-appstore').textContent = translations[preferredLang].linkAppstore;
            document.getElementById('link-appstore-cn').textContent = translations[preferredLang].linkAppstoreCn;
            document.getElementById('link-googleplay').textContent = translations[preferredLang].linkGoogleplay;
            document.getElementById('link-direct-download').textContent = translations[preferredLang].linkDirectDownload;

            checkYouTubeAccessibility((isAccessible) => {
                adjustLayout(isAccessible);
            });
        });
    </script>
</body>
</html>
